<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kviz 1C</title>
    
    <!-- Centralizovani CSS -->
    <link rel="stylesheet" href="../core/styles.css">
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="quiz-header">
            <img src="../assets/images/mekteb_logo.png" alt="MEKTEB Logo" class="quiz-icon">
            <h1>Kviz 1C</h1>
            <p class="subtitle">Dove, Namazi i Mubarek-dani</p>
        </div>

        <!-- QUIZ SCREEN -->
        <div id="quizScreen" class="quiz-screen">
            <div class="progress-info">
                <a href="../index.html" class="back-link">‚Üê Nazad</a>
                <div class="progress-bar-container">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
                <span id="questionCounter" style="color: #fbbf24; font-weight: 600;">1/20</span>
            </div>

            <div class="question-card">
                <div id="questionText" class="question-text"></div>
                <div id="optionsContainer" class="options"></div>
            </div>
        </div>

        <!-- RESULT SCREEN -->
        <div id="resultScreen" class="result-screen">
            <div class="result-card">
                <div id="resultEmoji" class="result-emoji">üåü</div>
                <div id="resultMessage" class="result-message">Izvrsno!</div>
                <div id="resultScore" class="result-score">0/20</div>
                <div id="resultPercentage" class="result-percentage">0% taƒçnih odgovora</div>
                <button onclick="restartQuiz()" class="restart-btn">üîÑ Ponovi kviz</button>
            </div>
        </div>
    </div>

    <!-- POPUP OVERLAY -->
    <div id="popupOverlay" class="popup-overlay">
        <div class="popup-content">
            <div id="popupIcon" class="popup-icon">‚úÖ</div>
            <div id="popupTitle" class="popup-title">Taƒçno!</div>
            <div id="popupExplanation" class="popup-explanation"></div>
            <button onclick="nextQuestion()" class="popup-next-btn">Sljedeƒáe pitanje ‚Üí</button>
        </div>
    </div>

    <!-- QUIZ DATA -->
    <script>
        const quizData = {
            questionsToShow: 20,
            allQuestions: [
                {"question": "Et-Tehijatu se uƒçi na svakom sjedenju u namazu.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Et-Tehijatu je dova kojom iskazujemo zahvalnost Allahu i uƒçimo je na svakom sjedenju u namazu."},
                {"question": "Salavati se uƒçe prije Et-Tehijatu.", "options": ["DA", "NE"], "answer": "NE", "explanation": "Salavati se uƒçe POSLIJE Et-Tehijatu na posljednjem sjedenju u namazu."},
                {"question": "Sabah-namaz ima ƒçetiri rekata.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Sabah-namaz ima 4 rekata: 2 rekata sunneta i 2 rekata farza."},
                {"question": "Ak≈°am-namaz ima pet rekata.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Ak≈°am-namaz ima 5 rekata: 3 farza i 2 sunneta."},
                {"question": "Hid≈æra je preseljenje Muhammeda, a.s., iz Mekke u Medinu.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Hid≈æra je preseljenje iz Mekke u Medinu 622. godine. Od tog dogaƒëaja poƒçinje islamski kalendar."},
                {"question": "Mevlud je dan roƒëenja Muhammeda, a.s.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Mevlud je dan u kojem se radujemo roƒëenju Muhammeda, a.s. - 12. rebiul-evvela."},
                {"question": "Ramazanski bajram se slavi nakon had≈æa.", "options": ["DA", "NE"], "answer": "NE", "explanation": "Ramazanski bajram se slavi nakon posta u ramazanu. Kurban-bajram se slavi nakon had≈æa."},
                {"question": "Teravih-namaz se klanja tokom ramazana.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Teravih-namaz je poseban noƒáni namaz koji se klanja samo tokom mjeseca ramazana."},
                {"question": "Hid≈æretski kalendar ima dvanaest mjeseci.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Hid≈æretski (islamski) kalendar ima 12 mjeseci: muharrem, safer, rebiul-evvel..."},
                {"question": "Prvi dan sedmice u hid≈æretskom kalendaru je nedjelja.", "options": ["DA", "NE"], "answer": "NE", "explanation": "Prvi dan sedmice u hid≈æretskom kalendaru je SUBOTA, a zadnji je petak (d≈æuma)."},
                {"question": "Dove se uƒçe na posljednjem sjedenju poslije salavata.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Na posljednjem sjedenju uƒçimo redom: Et-Tehijatu, salavate, pa dove."},
                {"question": "Et-Tehijatu je razgovor izmeƒëu Allaha i Muhammeda, a.s., na Mirad≈æu.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Et-Tehijatu su rijeƒçi razmijenjene izmeƒëu Allaha i Poslanika na Mirad≈æu (noƒánom putovanju)."},
                {"question": "Za Kurban-bajram se kolje kurban.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Za Kurban-bajram je sunnet (preporuƒçeno) zaklati kurban (≈ærtvenu ≈æivotinju) i podijeliti meso."},
                {"question": "Tekbiri-te≈°rik se uƒçe za vrijeme Kurban-bajrama.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Tekbiri-te≈°rik su rijeƒçi veliƒçanja Allaha koje se uƒçe poslije farz-namaza u danima Kurban-bajrama."},
                {"question": "Bajram-namaz ima dva rekata.", "options": ["DA", "NE"], "answer": "DA", "explanation": "Bajram-namaz (i Ramazanski i Kurban) ima 2 rekata i klanja se u d≈æematu."},
                {"question": "≈†ta je Et-Tehijatu?", "options": ["Poziv na namaz", "Dova zahvalnosti na sjedenju u namazu", "Zavr≈°etak namaza", "Poƒçetni tekbir"], "answer": "Dova zahvalnosti na sjedenju u namazu", "explanation": "Et-Tehijatu je dova kojom iskazujemo zahvalnost i pokornost Allahu na svakom sjedenju u namazu."},
                {"question": "≈†ta su salavati?", "options": ["Dove za roditelje", "Blagoslovi na Poslanika", "Poziv na namaz", "Zavr≈°etak namaza"], "answer": "Blagoslovi na Poslanika", "explanation": "Salavati su iskazi ljubavi i blagoslova prema Muhammedu, a.s., i njegovoj porodici."},
                {"question": "Koliko rekata ima sabah-namaz?", "options": ["Dva", "Tri", "ƒåetiri", "Pet"], "answer": "ƒåetiri", "explanation": "Sabah-namaz ima 4 rekata: 2 sunneta + 2 farza."},
                {"question": "Koliko rekata ima ak≈°am-namaz?", "options": ["Tri", "ƒåetiri", "Pet", "≈†est"], "answer": "Pet", "explanation": "Ak≈°am-namaz ima 5 rekata: 3 farza + 2 sunneta."},
                {"question": "Kada se desila Hid≈æra?", "options": ["571. godine", "610. godine", "622. godine", "632. godine"], "answer": "622. godine", "explanation": "Hid≈æra (preseljenje u Medinu) se desila 622. godine i od tada poƒçinje islamski kalendar."},
                {"question": "Koji je mjesec posta?", "options": ["Muharrem", "Red≈æeb", "Ramazan", "Zul-hid≈æd≈æe"], "answer": "Ramazan", "explanation": "Ramazan je deveti mjesec islamskog kalendara u kojem muslimani poste od zore do zalaska Sunca."},
                {"question": "Kada se slavi Mevlud?", "options": ["1. muharrema", "12. rebiul-evvela", "27. red≈æeba", "10. zul-hid≈æd≈æeta"], "answer": "12. rebiul-evvela", "explanation": "Mevlud (roƒëenje Muhammeda, a.s.) obilje≈æava se 12. rebiul-evvela."},
                {"question": "≈†ta je tekbiri-te≈°rik?", "options": ["Dova za mrtve", "Veliƒçanje Allaha za Kurban-bajram", "Poziv na namaz", "Zavr≈°etak namaza"], "answer": "Veliƒçanje Allaha za Kurban-bajram", "explanation": "Tekbiri-te≈°rik su rijeƒçi veliƒçanja Allaha (Allahu ekber...) koje se uƒçe za Kurban-bajram."},
                {"question": "Koji namaz se klanja samo tokom ramazana?", "options": ["Bajram-namaz", "Teravih-namaz", "D≈æuma-namaz", "D≈æenaza-namaz"], "answer": "Teravih-namaz", "explanation": "Teravih-namaz je poseban noƒáni namaz koji se klanja samo u mjesecu ramazanu."},
                {"question": "Koji dan je d≈æuma?", "options": ["Subota", "Nedjelja", "Petak", "Ponedjeljak"], "answer": "Petak", "explanation": "D≈æuma je petak - najva≈æniji dan u sedmici za muslimane kada se klanja d≈æuma-namaz."},
                {"question": "Koji je prvi mjesec islamskog kalendara?", "options": ["Ramazan", "Muharrem", "Rebiul-evvel", "Zul-hid≈æd≈æe"], "answer": "Muharrem", "explanation": "Muharrem je prvi mjesec islamskog (hid≈æretskog) kalendara."},
                {"question": "≈†ta je Mirad≈æ?", "options": ["Roƒëenje Poslanika", "Noƒáno putovanje Poslanika", "Preseljenje u Medinu", "Osvojenje Mekke"], "answer": "Noƒáno putovanje Poslanika", "explanation": "Mirad≈æ je noƒáno putovanje Muhammeda, a.s., na nebesa kada je propisan namaz."},
                {"question": "≈†ta se ka≈æe kada se kaje za grijeh?", "options": ["Ma≈°allah", "In≈°allah", "Estagfirullah", "Subhanallah"], "answer": "Estagfirullah", "explanation": "Estagfirullah znaƒçi 'Oprosti mi, Bo≈æe' - ka≈æemo kada se kajemo za grijeh."},
                {"question": "≈†ta je d≈æenaza-namaz?", "options": ["Namaz za umrlog", "Noƒáni namaz", "Jutarnji namaz", "Bajramski namaz"], "answer": "Namaz za umrlog", "explanation": "D≈æenaza-namaz je namaz koji se klanja za umrlu osobu prije ukopa."},
                {"question": "Kako se ƒçestita Bajram?", "options": ["Es-selamu alejkum", "Bajram ≈°erif mubarek olsun", "El-hamdu lillah", "Ma≈°allah"], "answer": "Bajram ≈°erif mubarek olsun", "explanation": "Bajram ƒçestitamo rijeƒçima 'Bajram ≈°erif mubarek olsun' - Neka ti je Bajram blagoslovljen."},
                {"question": "IZBACI ULJEZA: ≈†ta ne spada u redoslijed na sjedenju namaza?", "options": ["Et-Tehijatu", "Salavati", "Subhaneke", "Dove"], "answer": "Subhaneke", "explanation": "Subhaneke se uƒçi na STAJANJU (kijamu), ne na sjedenju. Na sjedenju uƒçimo: Et-Tehijatu, salavate, dove."},
                {"question": "IZBACI ULJEZA: Koji nije muslimanski mubarek-dan?", "options": ["Ramazanski bajram", "Kurban-bajram", "Nova gregorijanska godina", "Mevlud"], "answer": "Nova gregorijanska godina", "explanation": "Nova gregorijanska godina nije islamski praznik. Muslimanski mubarek-dani su: bajrami, Mevlud, nova hid≈æretska godina."},
                {"question": "IZBACI ULJEZA: Koji namaz nema sunnet?", "options": ["Sabah", "Ak≈°am", "D≈æuma", "Jacija"], "answer": "D≈æuma", "explanation": "D≈æuma-namaz ima samo 2 rekata farza (u d≈æematu), bez sunneta. Ostali namazi imaju i sunnet rekate."},
                {"question": "IZBACI ULJEZA: Koji izraz se ne koristi u svakodnevnom govoru?", "options": ["Bismillah", "In≈°allah", "Tekbiri-te≈°rik", "Ma≈°allah"], "answer": "Tekbiri-te≈°rik", "explanation": "Tekbiri-te≈°rik su posebne rijeƒçi veliƒçanja Allaha za Kurban-bajram, ne koriste se svakodnevno."},
                {"question": "IZBACI ULJEZA: Koji mjesec nije vezan za poseban ibadet?", "options": ["Ramazan", "Zul-hid≈æd≈æe", "Safer", "Rebiul-evvel"], "answer": "Safer", "explanation": "Safer nema poseban ibadet. Ramazan=post, Zul-hid≈æd≈æe=had≈æ, Rebiul-evvel=Mevlud."},
                {"question": "ASOCIJACIJA: Broj '5' u kontekstu namaza vas asocira na:", "options": ["Broj rekata ak≈°ama", "Pet dnevnih namaza", "Pet islamskih ≈°arta", "Oboje B i C"], "answer": "Oboje B i C", "explanation": "Broj 5 predstavlja i pet dnevnih namaza (sabah, podne, ikindija, ak≈°am, jacija) i pet islamskih ≈°arta."},
                {"question": "ASOCIJACIJA: Rijeƒç 'Mirad≈æ' vas asocira na:", "options": ["Et-Tehijatu", "Hid≈æru", "Mevlud", "Ramazan"], "answer": "Et-Tehijatu", "explanation": "Et-Tehijatu su rijeƒçi iz razgovora Allaha i Poslanika na Mirad≈æu (noƒánom putovanju)."},
                {"question": "ASOCIJACIJA: Rijeƒç 'kurban' vas asocira na:", "options": ["Ramazanski bajram", "Kurban-bajram", "Mevlud", "Hid≈æru"], "answer": "Kurban-bajram", "explanation": "Kurban (≈ærtvena ≈æivotinja) se kolje za Kurban-bajram kao sunnet."},
                {"question": "ASOCIJACIJA: Mjesec 'muharrem' vas asocira na:", "options": ["Post", "Had≈æ", "Novu hid≈æretsku godinu", "Mevlud"], "answer": "Novu hid≈æretsku godinu", "explanation": "Muharrem je prvi mjesec islamskog kalendara - u njemu poƒçinje nova hid≈æretska godina."},
                {"question": "ASOCIJACIJA: Rijeƒç 'teravih' vas asocira na:", "options": ["Ramazan", "Kurban-bajram", "D≈æumu", "D≈æenazu"], "answer": "Ramazan", "explanation": "Teravih-namaz se klanja samo tokom mjeseca ramazana."},
                {"question": "ANALOGIJA: Ramazan : post = Zul-hid≈æd≈æe : ?", "options": ["Post", "Had≈æ", "Mevlud", "Zekat"], "answer": "Had≈æ", "explanation": "U ramazanu se posti, a u zul-hid≈æd≈æetu se obavlja had≈æ."},
                {"question": "ANALOGIJA: Sabah : jutro = Jacija : ?", "options": ["Podne", "Veƒçe", "Noƒá", "Popodne"], "answer": "Noƒá", "explanation": "Sabah je jutarnji namaz, a jacija je noƒáni namaz (klanja se kada potpuno nestane svjetlosti)."},
                {"question": "ANALOGIJA: Ramazanski bajram : 1. ≈°evvala = Kurban-bajram : ?", "options": ["1. muharrema", "10. zul-hid≈æd≈æeta", "12. rebiul-evvela", "27. red≈æeba"], "answer": "10. zul-hid≈æd≈æeta", "explanation": "Ramazanski bajram poƒçinje 1. ≈°evvala, a Kurban-bajram 10. zul-hid≈æd≈æeta."},
                {"question": "ANALOGIJA: Et-Tehijatu : zahvalnost = Salavati : ?", "options": ["Molba", "Blagoslov Poslaniku", "Kajanje", "Za≈°tita"], "answer": "Blagoslov Poslaniku", "explanation": "Et-Tehijatu je iskazivanje zahvalnosti Allahu, a salavati su blagoslovi Muhammedu, a.s."},
                {"question": "ANALOGIJA: Mekka : Hid≈æra = Medina : ?", "options": ["Polazi≈°te", "Odredi≈°te", "Rodno mjesto", "Kaba"], "answer": "Odredi≈°te", "explanation": "Mekka je polazi≈°te Hid≈ære, a Medina je odredi≈°te (cilj) Hid≈ære."},
                {"question": "KO SAM JA? Ja sam mjesec posta. Deveti sam mjesec islamskog kalendara. U meni je objavljen Kur'an.", "options": ["Muharrem", "Ramazan", "Zul-hid≈æd≈æe", "Rebiul-evvel"], "answer": "Ramazan", "explanation": "Ramazan je deveti mjesec, mjesec posta, i u njemu je poƒçela objava Kur'ana."},
                {"question": "KO SAM JA? Ja sam dova na sjedenju. U meni se spominje Mirad≈æ. Uƒçim se u svakom namazu.", "options": ["Subhaneke", "Et-Tehijatu", "Salavati", "Dove"], "answer": "Et-Tehijatu", "explanation": "Et-Tehijatu su rijeƒçi razmijenjene na Mirad≈æu i uƒçe se na svakom sjedenju u namazu."},
                {"question": "≈†TA SAM JA? Ja sam poseban noƒáni namaz. Klanjam se samo u ramazanu. Imam 20 rekata.", "options": ["Vitr", "Teravih", "Tahijjatul-mesd≈æid", "Duha"], "answer": "Teravih", "explanation": "Teravih-namaz se klanja samo u ramazanu i ima 20 rekata (plus vitr)."},
                {"question": "KO SAM JA? Ja sam dan radosti. Slavim se nakon posta. Zovem se 'Mali bajram'.", "options": ["Kurban-bajram", "Ramazanski bajram", "Mevlud", "Nova godina"], "answer": "Ramazanski bajram", "explanation": "Ramazanski bajram (Bajrami-≈°erif, 'Mali bajram') se slavi nakon posta u ramazanu."},
                {"question": "≈†TA SAM JA? Ja sam preseljenje. Desio sam se 622. godine. Od mene poƒçinje islamski kalendar.", "options": ["Mevlud", "Mirad≈æ", "Hid≈æra", "Osvojenje Mekke"], "answer": "Hid≈æra", "explanation": "Hid≈æra je preseljenje iz Mekke u Medinu 622. godine - poƒçetak islamskog kalendara."},
                {"question": "DOPUNI NIZ: Et-Tehijatu, salavati, ...?", "options": ["Subhaneke", "Dove", "Fatiha", "Ezan"], "answer": "Dove", "explanation": "Na posljednjem sjedenju uƒçimo redom: Et-Tehijatu, salavate, dove."},
                {"question": "DOPUNI NIZ: Muharrem, safer, rebiul-evvel, ...?", "options": ["Ramazan", "Rebiul-ahir", "≈†aban", "≈†evval"], "answer": "Rebiul-ahir", "explanation": "Mjeseci hid≈æretskog kalendara: 1. Muharrem, 2. Safer, 3. Rebiul-evvel, 4. Rebiul-ahir..."},
                {"question": "DOPUNI NIZ: Bismillah, el-hamdu lillah, subhanallah, ...?", "options": ["Allahu ekber", "Namaz", "Abdest", "D≈æamija"], "answer": "Allahu ekber", "explanation": "Ovo su zikrovi/izrazi: Bismillah, El-hamdu lillah, Subhanallah, Allahu ekber (tekbir)."},
                {"question": "DOPUNI NIZ: Bajram-namaz, d≈æuma-namaz, teravih-namaz, ...?", "options": ["Sabah-namaz", "D≈æenaza-namaz", "Podne-namaz", "Ak≈°am-namaz"], "answer": "D≈æenaza-namaz", "explanation": "Posebni namazi su: bajram-namaz, d≈æuma-namaz, teravih-namaz, d≈æenaza-namaz."},
                {"question": "DOPUNI NIZ: Sabah 4 rekata, ak≈°am 5 rekata, podne ...?", "options": ["4 rekata", "8 rekata", "10 rekata", "12 rekata"], "answer": "10 rekata", "explanation": "Podne-namaz ima 10 rekata: 4 sunneta + 4 farza + 2 sunneta."},
                {"question": "SITUACIJA: Ahmed ≈æeli ƒçestitati prijatelju Bajram. ≈†ta treba reƒái?", "options": ["Es-selamu alejkum", "Bajram ≈°erif mubarek olsun", "Ma≈°allah", "In≈°allah"], "answer": "Bajram ≈°erif mubarek olsun", "explanation": "Bajram ƒçestitamo rijeƒçima 'Bajram ≈°erif mubarek olsun' - Neka ti je Bajram blagoslovljen."},
                {"question": "SITUACIJA: Merjem je pogrije≈°ila u namazu. ≈†ta treba reƒái kada se kaje?", "options": ["Ma≈°allah", "In≈°allah", "Estagfirullah", "Subhanallah"], "answer": "Estagfirullah", "explanation": "Estagfirullah (Oprosti mi, Bo≈æe) ka≈æemo kada se kajemo za grijeh ili gre≈°ku."},
                {"question": "SITUACIJA: Hasan zavr≈°ava namaz. Koje rijeƒçi izgovara na kraju?", "options": ["Allahu ekber", "Es-selamu alejkum ve rahmetullah", "Subhaneke", "Bismillah"], "answer": "Es-selamu alejkum ve rahmetullah", "explanation": "Namaz zavr≈°avamo selamom - okrenemo glavu desno pa lijevo i ka≈æemo 'Es-selamu alejkum ve rahmetullah'."},
                {"question": "SITUACIJA: Danas je 1. ≈°evvala. Koji praznik je danas?", "options": ["Kurban-bajram", "Ramazanski bajram", "Mevlud", "Nova hid≈æretska godina"], "answer": "Ramazanski bajram", "explanation": "Ramazanski bajram poƒçinje 1. ≈°evvala (deseti mjesec), nakon zavr≈°etka posta u ramazanu."},
                {"question": "PRONAƒêI GRE≈†KU: Na sjedenju uƒçimo: Subhaneke, salavate, dove.", "options": ["Subhaneke", "Salavate", "Dove", "Nema gre≈°ke"], "answer": "Subhaneke", "explanation": "GRE≈†KA! Subhaneke se uƒçi na STAJANJU, ne na sjedenju. Na sjedenju uƒçimo: Et-Tehijatu, salavate, dove."}
            ]
        };
    </script>

    <!-- Centralizovani JavaScript Engine -->
    <script src="../core/quiz-engine.js"></script>
    <!-- MEKTEB AUTO-SAVE - Inline integracija -->
    <script>
    console.log('üîå MEKTEB AUTO-SAVE: Uƒçitan!');
    
    // ƒåekaj da se stranica potpuno uƒçita
    window.addEventListener('load', function() {
        console.log('üìÑ Stranica uƒçitana, aktiviram auto-save...');
        
        // Funkcija za spremanje rezultata
        async function saveMektebResult(score, total, time) {
            const API_URL = 'https://mekteb.net/wp-json/mekteb/v1';
            
            console.log('üíæ saveMektebResult pozvan:', {score, total, time});
            
            // Provjeri da li je korisnik prijavljen
            const userData = localStorage.getItem('mektebUser');
            if (!userData) {
                console.log('‚ö†Ô∏è Korisnik nije prijavljen - preskaƒçem spremanje');
                return false;
            }
            
            let user;
            try {
                user = JSON.parse(userData);
                console.log('üë§ Prijavljen korisnik:', user.name, '(ID:', user.id + ')');
            } catch (e) {
                console.error('‚ùå Gre≈°ka pri parsiranju user podataka:', e);
                return false;
            }
            
            // Detektuj naziv kviza iz URL-a
            const quizName = window.location.pathname.match(/\/([^\/]+)\.html$/)?.[1]?.toUpperCase() || 'UNKNOWN';
            console.log('üìù Kviz:', quizName);
            
            const payload = {
                user_id: user.id,
                quiz: quizName,
                score: score,
                total: total,
                time: time || 0
            };
            
            console.log('üì§ ≈†aljem na API:', payload);
            
            try {
                const response = await fetch(API_URL + '/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                console.log('üì• API Response Status:', response.status);
                
                const data = await response.json();
                console.log('üì¶ API Response Data:', data);
                
                if (data.success) {
                    console.log('‚úÖ REZULTAT USPJE≈†NO SPREMLJEN!');
                    console.log('   User:', user.name);
                    console.log('   Kviz:', quizName);
                    console.log('   Rezultat:', score + '/' + total);
                    console.log('   Postotak:', Math.round((score/total)*100) + '%');
                    return true;
                } else {
                    console.error('‚ùå API vratio gre≈°ku:', data.message);
                    return false;
                }
            } catch (error) {
                console.error('üî• Gre≈°ka pri slanju na API:', error);
                return false;
            }
        }
        
        // Javna funkcija za ruƒçno spremanje
        window.mektebSave = saveMektebResult;
        
        // AUTOMATSKO DETEKTOVANJE REZULTATA
        let resultSaved = false;
        let lastSeenScore = '0/20';
        
        const observer = new MutationObserver(function(mutations) {
            const resultScreen = document.getElementById('resultScreen');
            const resultScore = document.getElementById('resultScore');
            
            if (resultScreen && resultScore && 
                resultScreen.style.display !== 'none' && 
                !resultSaved) {
                
                const scoreText = resultScore.textContent;
                
                // Ako se rezultat promijenio i nije 0/20
                if (scoreText !== lastSeenScore && scoreText !== '0/20') {
                    console.log('üéØ Rezultat se promijenio:', lastSeenScore, '‚Üí', scoreText);
                    
                    const match = scoreText.match(/(\d+)\/(\d+)/);
                    if (match) {
                        const score = parseInt(match[1]);
                        const total = parseInt(match[2]);
                        
                        // Validacija: score mora biti > 0 ili ako je stvarno 0 onda total > 0
                        if (score > 0 || (score === 0 && total > 0 && scoreText !== '0/20')) {
                            console.log('‚úÖ Detektovan finalni rezultat:', score + '/' + total);
                            
                            resultSaved = true;
                            saveMektebResult(score, total, 0);
                        }
                    }
                }
                
                lastSeenScore = scoreText;
            }
        });
        
        // Posmatraj cijeli body
        observer.observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true,
            attributeFilter: ['style'],
            characterData: true  // Prati promjene u tekstualnom sadr≈æaju
        });
        
        console.log('‚úÖ Auto-save modul aktivan!');
        console.log('   üìå Za ruƒçno spremanje: window.mektebSave(score, total, time)');
    });
    </script>
</body>
</html>